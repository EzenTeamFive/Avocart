let isModified = false;

async function removeFileToServer(uuid) {
    try {
        const url = '/store/file/' + uuid;
        const config = {
            method: 'delete'
        };
        const resp = await fetch(url, config);
        const result = await resp.text();
        return result;
    } catch (err) {
        console.log(err);
    }
}

document.getElementById('regBtn').addEventListener('click', () => {
    isModified = true;
});

document.addEventListener('click', async (e) => {
    if (e.target.classList.contains('file-x')) {
        const listItem = e.target.closest('li');
        listItem.style.display = 'none'; // 이미지 삭제 후 가리기

        if (isModified) {
            const result = await removeFileToServer(e.target.dataset.uuid);
            if (parseInt(result)) {
                listItem.remove();
            }
        }
    }
});
